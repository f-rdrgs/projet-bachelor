version: "3.1"

stories:
  - story: salutation_bot
    steps:
        - intent: salutation
        - action: utter_salutation

  # Mettre un slot_was_set pour tester si on était pas déjà dans un form de réservation et revenir à la suite
  # Implémenter un form qui va boucler tant qu'une réservation n'est pas fournie ou un "annuler"
  - story: debut_reservation_w_ressource
    steps:
      - intent: ressource_gather
      - checkpoint: check_value_ressource

  - story: debut_reservation_wo_ressource
    steps:
      - intent: gather_no_ressource
      - action: utter_gather_no_ressource
      - checkpoint: start_form_ressource


  - story: pre_check_value_ressource_failed
    steps:
      - checkpoint: check_value_ressource
      - action: validate_existance_ressource
      - slot_was_set: 
        - ressource: None
      - checkpoint: start_form_ressource

  - story: pre_check_value_ressource_succeeded
    steps:
      - checkpoint: check_value_ressource
      - action: validate_existance_ressource
      - slot_was_set: 
        - ressource: Tennis
      - action: utter_ressource
      - checkpoint: select_horaire

  - story: start_form_ressource
    steps:
      - checkpoint: start_form_ressource
      - action: get_ressource_form
      - active_loop: get_ressource_form
      - checkpoint: select_horaire

  - story: start_form_horaire
    steps:
      - checkpoint: select_horaire
      - action: utter_fin


  