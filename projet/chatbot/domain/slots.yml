version: "3.1"

slots:
  ressource:
    type: text
    mappings:
        - type: from_entity
          entity: ressource
          intent: inform_ressource
          conditions:
            - active_loop: get_ressource_form # Récolte la ressource QUE lorsqu'on est dans un form
    influence_conversation: false
  ressource_ask:
    type: text
    mappings:
        - type: from_entity
          entity: ressource
    influence_conversation: false
  date:
    type: text
    mappings:
      - type: from_entity
        entity: date
        intent: inform_date
        conditions:
          - active_loop: get_date_heure_form # Récolte la ressource QUE lorsqu'on est dans un form
    influence_conversation: false
  heure:
    type: text
    mappings:
      - type: from_entity
        entity: heure
        intent: inform_heure
        conditions:
          - active_loop: get_date_heure_form # Récolte la ressource QUE lorsqu'on est dans un form
    influence_conversation: false
  accept_deny:
    type: bool
    mappings:
      - type: from_intent
        value: true
        intent: affirm
        not_intent: refuse
      - type: from_intent
        value: false
        intent: refuse
        not_intent: affirm
  debug:
    type: bool
    initial_value: false
    mappings:
      - type: from_intent
        value: true
        intent: debug
  nom_prenom:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: get_info_reserv_form
            requested_slot: nom_prenom
    influence_conversation: false
  ressource_prereserv:
    type: text
    mappings:
      - type: from_entity
        entity: ressource
    influence_conversation: false
  date_prereserv:
    type: text
    mappings:
      - type: from_entity
        entity: date
    influence_conversation: false
  heure_prereserv:
    type: text
    mappings:
      - type: from_entity
        entity: heure
    influence_conversation: false
  options_ressource:
      type: list
      initial_value: []
      influence_conversation: false
      mappings:
        - type: custom
  choix_option:
    type: float
    min_value: -1.0
    max_value: 50.0
    mappings:
      - type: from_text
        conditions:
          - active_loop: get_options_reserv_form
            requested_slot: choix_option
    influence_conversation: false
# S'incrémente à chaque option passée pour track progression
  option_count:
    type: float
    min_value: -1.0
    max_value: 50.0
    initial_value: 0
    mappings:
      - type: custom
    influence_conversation: false
  numero_tel:
    type: text
    mappings:
      - type: from_entity
        entity: numero_tel
        intent: inform_num_phone
        conditions:
          - active_loop: get_info_reserv_form
            requested_slot: numero_tel
    influence_conversation: false